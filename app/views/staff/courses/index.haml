- content_for :head do
  = javascript_include_tag "pages/staff/courses/index-bundle"
  = stylesheet_link_tag "pages/staff/courses/index-bundle", :media => "all"
  :javascript
    window.keyword = "#{@keyword}"
    window.profile = "#{@profile}"


.content-area
  /courses-index
  .content-box
    .manage-box
      .user-search-box
        .input-group
          %input.form-control#search-input{:type => "text", :placeholder => "输入课程名称", :value => "#{@keyword}"}
          %span.input-group-btn
            %button.btn.btn-default#search-btn{:type => "button"}

    .manage-content
      .tabbable
        %ul.nav.nav-tabs
          %li.active
            %a{"data-toggle" => "tab", :href => "#tab1"} 本区开课
          %li
            %a{"data-toggle" => "tab", :href => "#tab2"} 可开课程

        .tab-content
          #tab1.tab-pane.active
            .local-course
              - if @course_insts[:data].length == 0
                .undiscover
                  %img.undiscover-icon{:src => "/assets/managecenter/undiscover.png"}
                  %span.message 抱歉！暂无查找信息
              - else
                .table-box
                  %table.table.table-bordered#local-course-table
                    %thead
                      %tr
                        %th 课&nbsp程
                        %th 上课时间
                        %th 上课地址
                        %th 主讲人
                        %th 费用
                        %th{:colspan => "2"} 操&nbsp作
                    %tbody
                      - @course_insts[:data].each do |ci|
                        %tr{class: "book-record #{ ci[:available] ? "available" : "unavailable" }", "data-id" => ci[:id]}
                          %td= ci[:name]
                          %td= ci[:date]
                          %td= ci[:address]
                          %td= ci[:speaker]
                          %td= ci[:price]
                          %td 
                            %a.details{:href => "/staff/courses/" + ci[:id]} 详情
                          %td
                            - if ci[:available]
                              %a.set-available.link-available{:href => "javascript:void(0);"} 下架
                            - else
                              %a.set-available.link-unavailable{:href => "javascript:void(0);"} 上架
                          

                .select-page 
                  %span.totalitems= "共#{@course_insts[:total_page]}页,总计#{@course_insts[:total_number]}条"
                  %span.choice-page
                    %ul.pagination.pagination-sm
                      %li
                        %a{:href => "/staff/courses?keyword=#{@keyword}&course_inst_page=#{@course_insts[:previous_page]}"} «
                      - ( (@course_insts[:previous_page] > 2 ? @course_insts[:previous_page] - 2 : 1) .. (@course_insts[:next_page] < @course_insts[:total_page] - 2 ? @course_insts[:next_page] + 2 : @course_insts[:total_page]) ).to_a.each do |page|
                        %li
                          %a{:href => "/staff/courses?keyword=#{@keyword}&course_inst_page=#{page}"}= page
                      %li
                        %a{:href => "/staff/courses?keyword=#{@keyword}&course_inst_page=#{@course_insts[:next_page]}"} »
          #tab2.tab-pane
            .open-course
              - if @courses[:data].length == 0
                .undiscover
                  %img.undiscover-icon{:src => "/assets/managecenter/undiscover.png"}
                  %span.message 抱歉！暂无查找信息
              - else
                .table-box
                  %table.table.table-bordered#course-table
                    %thead
                      %tr
                        %th 课&nbsp程
                        %th 编&nbsp号
                        %th 主讲人
                        %th 价格
                        %th 操&nbsp作
                    %tbody
                      - @courses[:data].each do |e|
                        / %tr{class: i == 1 ? "clicked" : (i == 2 ? "unavailable" : "") }
                        %tr{class: e[:available] == false ? "unavailable" : ""}
                          %td
                            = link_to e[:name], "/staff/courses/" + e[:id] + "/show_template"
                          %td= e[:code]
                          %td= e[:speaker]
                          %td= e[:price]
                          %td#open
                            = link_to "开设课程", "/staff/courses/new?course_id=" + e[:id], class: "prepare"
                      
                .select-page 
                  %span.totalitems= "共#{@courses[:total_page]}页,总计#{@courses[:total_number]}条"
                  %span.choice-page
                    %ul.pagination.pagination-sm
                      %li
                        %a{:href => "/staff/courses?keyword=#{@keyword}&course_page=#{@courses[:previous_page]}&profile=template"} «
                      - ( (@courses[:previous_page] > 2 ? @courses[:previous_page] - 2 : 1) .. (@courses[:next_page] < @courses[:total_page] - 2 ? @courses[:next_page] + 2 : @courses[:total_page]) ).to_a.each do |page|
                        %li
                          %a{:href => "/staff/courses?keyword=#{@keyword}&course_page=#{page}&profile=template"}= page
                      %li
                        %a{:href => "/staff/courses?keyword=#{@keyword}&course_page=#{@courses[:next_page]}&profile=template"} »
        



#shelveModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"} 
  .modalheader
    %img.close{"aria-hidden" => "true", "data-dismiss" => "modal", :src => "/assets/managecenter/close.png"}
    %p.caption 请填写完整信息后再选择上架
  .modal-body
    %a.footbox#signup-signin{:href => "javascript:void(0);"}
      点击前往补全信息
      %span.right-arrow
        %img{:src => "/assets/managecenter/right-arrow.png"}


                              
