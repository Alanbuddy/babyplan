- content_for :head do
  = javascript_include_tag "pages/admin/courses/index-bundle"
  = stylesheet_link_tag "pages/admin/courses/index-bundle", :media => "all"
  :javascript
    window.keyword = "#{@keyword}"

.content-area
  /courses-index
  .content-box
    .manage-box
      .user-search-box
        .input-group
          %input.form-control#search-input{:type => "text", :placeholder => "输入课程名称", :value => "#{@keyword}"}
          %span.input-group-btn
            %button.btn.btn-default#search-btn{:type => "button"}
      .btn.add-btn{:type => "button"} 
        %img.course-edit{:src => "/assets/managecenter/add.png"}
        添加课程
    
    .manage-content
      - if @courses[:data].length == 0
        .undiscover
          %img.undiscover-icon{:src => "/assets/managecenter/undiscover.png"}
          %span.message 抱歉！暂无查找信息
      - else
        .table-box
          %table.table.table-bordered#user-table
            %thead
              %tr
                %th 课&nbsp程
                %th 编&nbsp号
                %th 主讲人
                %th 费&nbsp用
                %th 操&nbsp作
            %tbody
              - @courses[:data].each do |c|
                %tr{class: "#{ c[:available] ? "available" : "unavailable" }", "data-id" => c[:id]}
                  %td= link_to c[:name], "/admin/courses/#{c[:id]}"
                  %td= c[:code]
                  %td= c[:speaker]
                  %td= c[:price]
                  %td
                    - if c[:available]
                      %a.set-available.link-available{:href => "javascript:void(0);"} 下架
                    - else
                      %a.set-available.link-unavailable{:href => "javascript:void(0);"} 上架
        .select-page 
          %span.totalitems= "共#{@courses[:total_page]}页,总计#{@courses[:total_number]}条"
          %span.choice-page
            %ul.pagination.pagination-sm
              %li
                %a{:href => "/staff/courses?keyword=#{@keyword}&page=#{@courses[:previous_page]}"} «
              - ( (@courses[:previous_page] > 2 ? @courses[:previous_page] - 2 : 1) .. (@courses[:next_page] < @courses[:total_page] - 2 ? @courses[:next_page] + 2 : @courses[:total_page]) ).to_a.each do |page|
                %li
                  %a{:href => "/staff/courses?keyword=#{@keyword}&page=#{page}"}= page
              %li
                %a{:href => "/staff/courses?keyword=#{@keyword}&page=#{@courses[:next_page]}"} »
